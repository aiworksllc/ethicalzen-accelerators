# ============================================================================
# EthicalZen Healthcare Accelerator - SAAS DEPLOYMENT (Simple)
# ============================================================================
# Quick Start Architecture:
# ✅ Simple setup (just your app)
# ✅ Hosted gateway (managed by EthicalZen)
# ✅ Automatic updates (guardrails kept current)
# ✅ BYOK (your LLM key, your costs)
#
# Use this for:
# - Development & testing
# - Quick prototypes
# - Non-regulated environments
#
# For production/HIPAA/regulated: Use docker-compose.local.yml instead
# ============================================================================

version: '3.8'

services:
  app:
    build: .
    container_name: healthcare-portal
    ports:
      - "3000:3000"
    environment:
      # EthicalZen Gateway (HOSTED - managed SaaS)
      - ETHICALZEN_API_KEY=${ETHICALZEN_API_KEY}
      - ETHICALZEN_GATEWAY_URL=${ETHICALZEN_GATEWAY_URL:-https://gateway.ethicalzen.ai}
      
      # Your LLM Provider (BYOK)
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - GROQ_API_KEY=${GROQ_API_KEY}
      - LLM_PROVIDER=${LLM_PROVIDER:-openai}
      - LLM_MODEL=${LLM_MODEL:-gpt-4}
      
      # Application Settings
      - PORT=3000
      - NODE_ENV=${NODE_ENV:-development}
      - USE_CASE=${USE_CASE:-patient-portal}
      - INDUSTRY=${INDUSTRY:-healthcare}
      - REGION=${REGION:-us}
      - DATA_SENSITIVITY=${DATA_SENSITIVITY:-PHI,PII}
    volumes:
      - ./app:/app
      - /app/node_modules
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    restart: unless-stopped

networks:
  default:
    name: healthcare-portal-network

# ============================================================================
# Usage:
# ============================================================================
# 1. Get API keys:
#    - EthicalZen: https://app.ethicalzen.ai/signup
#    - OpenAI: https://platform.openai.com/api-keys
#
# 2. Configure .env:
#    ETHICALZEN_API_KEY=sk-your-ethicalzen-key
#    OPENAI_API_KEY=sk-your-openai-key
#
# 3. Start:
#    docker-compose up -d
#
# 4. Test:
#    npm test
#
# 5. Access:
#    http://localhost:3000
#
# For FULLY LOCAL deployment (zero cloud dependencies):
#    docker-compose -f docker-compose.local.yml up -d
# ============================================================================

